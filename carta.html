<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carta</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="envelope">
        <div id="bottom-flap"></div>
        <div id="top-flap"><div id="adesivo"></div></div>
        <div id="divisoria-sombra"></div>

        <div id="heart-container">
            <div class="coracao" style="left: 30px;"></div>
            <div class="coracao" style="right: 50px;"></div>
            <div class="coracao"></div>
        </div>
        
        <div id="papel">
            <span id="escrita"></span>
        </div>
    </div>

    
    <table id="button-container">
        <tr>
            <td><button id="abrir">Abrir</button></td>
            <td><button id="puxar">Puxar</button></td>
        </tr>
        <tr>
            <td><button id="fechar">Fechar</button></td>
            <td><button id="guardar">Guardar</button></td>
        </tr>
        <tr>
            <td><button id="proximo">Próximo</button></td>
        </tr>
    </table>    


    <script>
        const envelope = document.getElementById('envelope');
        const flap = document.getElementById('top-flap');
        const heartContainer = document.getElementById('heart-container');
        const papel = document.getElementById('papel');
        const hearts = document.querySelectorAll(".coracao");

        // Função para ativar o voo dos corações
        function voarCoracoes() {
            hearts.forEach((heart, index) => {
                setTimeout(() => {
                    heart.classList.add("fly");
                }, index * 200); // Adiciona delay entre cada coração
            });
        }

        const openButton = document.getElementById('abrir');
        const resetButton = document.getElementById('fechar');
        const pullButton = document.getElementById('puxar');
        const saveButton = document.getElementById('guardar');
        const nextButton = document.getElementById('proximo');

        openButton.addEventListener('touchstart', () => {
            flap.style.transform = 'rotateX(-180deg)';
            heartContainer.style.opacity = '1';
            voarCoracoes();
        });

        resetButton.addEventListener('touchstart', () => {
            flap.style.transform = 'rotateX(0deg)';
            heartContainer.style.opacity = '0';
        });

        pullButton.addEventListener('touchstart', () => {
            papel.style.opacity = 1;

            const texto = "Feliz Natal, Rafa! Você foi o melhor presente que eu poderia ter recebido esse ano. Você me trás felicidade. Nunca sinto que estou perdendo meu tempo com você, mesmo que esteja precisando fazer alguma outra coisa. Mesmo em silêncio ainda é bom e necessário. Amei passar esse ano com você. ❤ Eu te daria o mundo, mas ele é muito sujo para uma pessoa maravilhosa igual você. Eu te daria a lua pois ela ilumina a noite igual você me ilumina. - Desconhecido.";
            const elemento = document.getElementById("escrita");

            if (elemento.textContent === texto) {
                return; // Sai da função, pois o texto já está completo
            }

            let indice = 0;

            function escreverTexto() {
                if (indice < texto.length) {
                    elemento.textContent += texto[indice];
                    indice++;
                    setTimeout(escreverTexto, 50); // Adiciona a próxima letra após 50ms
                }
            }
            escreverTexto();
        })

        saveButton.addEventListener('touchstart', () => {
            papel.style.opacity = 0;
        })

        nextButton.addEventListener('touchstart', () => {
            window.location.href = 'fim.html';
        })

    </script>
</body>

</html>